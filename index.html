<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Gauntlet Hub</title>
    <style>
    /* ===== BASE STYLES ===== */
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f7fa;
        color: #333;
        line-height: 1.6;
    }
    
    /* ===== TAB SYSTEM ===== */
    .tab-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .tab-buttons {
        display: flex;
        margin-bottom: -1px;
        flex-wrap: wrap;
    }
    
    .tab-btn {
        padding: 12px 20px;
        background: #e0e0e0;
        border: none;
        border-radius: 5px 5px 0 0;
        cursor: pointer;
        margin-right: 5px;
        font-weight: bold;
        transition: all 0.3s;
    }
    
    .tab-btn.active {
        background: #3498db;
        color: white;
    }
    
    .tab-content {
        display: none;
        padding: 20px;
        background: white;
        border-radius: 0 5px 5px 5px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .tab-content.active {
        display: block;
    }
    
    /* ===== CARD CHECKER STYLES ===== */
    #checker-container {
        padding: 30px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    #searchInput {
        width: 70%;
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
        transition: border 0.3s;
    }
    
    #searchInput:focus {
        border-color: #3498db;
        outline: none;
    }
    
    #checker-container button {
        background: #3498db;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.3s;
        margin: 5px;
    }
    
    #checker-container button:hover {
        background: #2980b9;
    }
    
    #result {
        margin-top: 25px;
        padding: 15px;
        font-size: 1.2rem;
        font-weight: bold;
        border-radius: 6px;
        transition: all 0.3s;
    }
    
    .banned {
        background: #e74c3c;
        color: white;
        box-shadow: 0 3px 6px rgba(231, 76, 60, 0.2);
    }
    
    .legal {
        background: #2ecc71;
        color: white;
        box-shadow: 0 3px 6px rgba(46, 204, 113, 0.2);
    }
    
    .card-image {
        max-width: 100%;
        height: auto;
        border-radius: 5px;
        margin-top: 10px;
    }
    
    .card-info {
        text-align: left;
        margin-top: 10px;
    }
    
    /* ===== GRAVEYARD STYLES ===== */
    .banned-card {
        background: #f8d7da;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 5px;
        border-left: 4px solid #dc3545;
    }
    
    @media (max-width: 600px) {
        .tab-btn {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
        
        #searchInput {
            width: 100%;
        }
        
        #checker-container button {
            width: 100%;
        }
    }
    </style>
</head>
<body>
    <div class="tab-container">
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="openTab(event, 'checker')">Card Checker</button>
            <button class="tab-btn" onclick="openTab(event, 'guidelines')">Guidelines</button>
            <button class="tab-btn" onclick="openTab(event, 'playlist')">Playlist</button>
            <button class="tab-btn" onclick="openTab(event, 'graveyard')">Graveyard</button>
        </div>
        
        <!-- Card Checker Tab -->
        <div id="checker" class="tab-content active">
            <h1>Magic Gauntlet Card Checker</h1>
            <div id="checker-container">
                <input type="text" id="searchInput" placeholder="Enter card name">
                <button onclick="checkCard()">Check Card</button>
                <div id="result"></div>
                <div id="card-display" style="display:none;">
                    <img id="card-image" class="card-image" src="" alt="Card Image">
                    <div id="card-info" class="card-info"></div>
                </div>
            </div>
        </div>
        
        <!-- Guidelines Tab -->
        <div id="guidelines" class="tab-content">
            <h1>Format Guidelines</h1>
            <div class="guidelines-container">
                <h2>Core Rules</h2>
                <ul>
                    <li><strong>Damage Spells:</strong> Can't deal more damage than their CMC</li>
                    <li><strong>Kill Spells:</strong> Unconditional removal must cost 5+ mana</li>
                    <li><strong>Counterspells:</strong> Unconditional counters must cost 4+ mana</li>
                    <li><strong>Board Wipes:</strong> Must cost 6+ mana</li>
                    <li><strong>Land Destruction:</strong> Must cost 4+ mana</li>
                    <li><strong>Mana Rocks:</strong> Under 3 CMC must enter tapped, can only produce 1 mana</li>
                </ul>
                
                <h2>Hard Banned Cards</h2>
                <div id="banned-list"></div>
            </div>
        </div>
        
        <!-- Playlist Tab -->
        <div id="playlist" class="tab-content">
            <h1>Match Playlists</h1>
            <div class="video-gallery">
                <div class="video-item">
                    <h3>Coming Soon!</h3>
                    <p>Your Magic Gauntlet matches will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Graveyard Tab -->
        <div id="graveyard" class="tab-content">
            <h1>Graveyard (Banned Cards)</h1>
            <div id="graveyard-cards" class="card-gallery"></div>
        </div>
    </div>

    <script>
        // HARD BAN LIST
        const hardBannedCards = [
            { name: "Sol Ring", reason: "Mana rocks producing 2+ mana are banned" },
            { name: "Lightning Bolt", reason: "Damage exceeds CMC (3 damage for 1 mana)" },
            { name: "Mana Crypt", reason: "Free mana rocks are banned" },
            { name: "Mox Emerald", reason: "Free mana rocks are banned" },
            { name: "Mox Jet", reason: "Free mana rocks are banned" },
            { name: "Mox Pearl", reason: "Free mana rocks are banned" },
            { name: "Mox Ruby", reason: "Free mana rocks are banned" },
            { name: "Mox Sapphire", reason: "Free mana rocks are banned" }
        ];

        // TAB SYSTEM
        function openTab(event, tabName) {
            // Hide all tab contents
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }
            
            // Deactivate all tab buttons
            const tabButtons = document.getElementsByClassName("tab-btn");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }
            
            // Activate selected tab
            document.getElementById(tabName).classList.add("active");
            event.currentTarget.classList.add("active");
        }

        // UPDATE GRAVEYARD DISPLAY
        function updateGraveyardDisplay() {
            const graveyard = document.getElementById("graveyard-cards");
            graveyard.innerHTML = hardBannedCards.map(card => `
                <div class="banned-card">
                    <h3>${card.name}</h3>
                    <p>${card.reason}</p>
                </div>
            `).join("");
        }

        // UPDATE BANNED LIST IN GUIDELINES
        function updateBannedList() {
            const bannedList = document.getElementById("banned-list");
            bannedList.innerHTML = "<ul>" + 
                hardBannedCards.map(card => `<li><strong>${card.name}</strong>: ${card.reason}</li>`).join("") +
                "</ul>";
        }

        // CARD CHECKER FUNCTIONS
        function isCardBanned(card) {
            // Check hard ban list first
            const hardBan = hardBannedCards.find(banned => 
                card.name.toLowerCase() === banned.name.toLowerCase()
            );
            if (hardBan) return hardBan.reason;

            // Damage spell rules
            if (card.type_line.includes("Instant") || card.type_line.includes("Sorcery")) {
                if (card.oracle_text.toLowerCase().includes("damage")) {
                    const damageMatch = card.oracle_text.match(/deal[s]? (\d+) damage/i);
                    if (damageMatch) {
                        const damage = parseInt(damageMatch[1]);
                        const cmc = card.cmc;
                        if (damage > cmc) {
                            return "Damage spells cannot deal more damage than their CMC";
                        }
                    }
                }
                
                // Kill spell rules
                if (card.oracle_text.toLowerCase().includes("destroy target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 5) {
                    return "Unconditional kill spells must cost 5 or more";
                }
                
                // Counter spell rules
                if (card.oracle_text.toLowerCase().includes("counter target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 4) {
                    return "Unconditional counterspells must cost 4 or more";
                }
            }
            
            // Board wipe rules
            if ((card.oracle_text.toLowerCase().includes("destroy all") || 
                card.oracle_text.toLowerCase().includes("exile all")) &&
                card.cmc < 6) {
                return "Mass board wipes must cost 6 or more";
            }
            
            // Land destruction rules
            if (card.oracle_text.toLowerCase().includes("destroy target land") && 
                card.cmc < 4) {
                return "Land destruction spells must cost 4 or more";
            }
            
            // Land rules
            if (card.type_line.includes("Land")) {
                if (card.oracle_text.toLowerCase().includes("enters the battlefield untapped") ||
                    card.oracle_text.toLowerCase().includes("add two or more mana")) {
                    return "Dual lands must enter tapped and cannot have positive ETB effects";
                }
            }
            
            // Mana rock rules
            if (card.type_line.includes("Artifact")) {
                const oracleText = card.oracle_text.toLowerCase();
                
                if (oracleText.includes("add") && oracleText.includes("mana")) {
                    if (oracleText.match(/adds? \{.+\}.+and.+{.+}/) || 
                        oracleText.includes("two or more") ||
                        oracleText.includes("add an additional") ||
                        oracleText.match(/adds? \w+ mana/)) {
                        return "Mana rocks can only produce 1 mana";
                    }
                    
                    if (card.cmc < 3 && 
                        !oracleText.includes("enters the battlefield tapped") &&
                        !card.name.toLowerCase().includes("lotus")) {
                        return "Mana rocks under 3 CMC must enter tapped";
                    }
                }
            }
            
            return false;
        }

        async function checkCard() {
            const input = document.getElementById("searchInput").value.trim();
            const resultDiv = document.getElementById("result");
            const cardDisplay = document.getElementById("card-display");
            const cardImage = document.getElementById("card-image");
            const cardInfo = document.getElementById("card-info");
            
            if (!input) {
                resultDiv.textContent = "Please enter a card name";
                resultDiv.className = "";
                cardDisplay.style.display = "none";
                return;
            }

            try {
                const response = await fetch(`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(input)}`);
                const card = await response.json();
                
                cardImage.src = card.image_uris ? card.image_uris.normal : card.card_faces[0].image_uris.normal;
                cardInfo.innerHTML = `
                    <strong>${card.name}</strong><br>
                    <em>${card.type_line}</em><br>
                    ${card.oracle_text}<br>
                    <strong>Mana Cost:</strong> ${card.mana_cost} (CMC: ${card.cmc})
                `;
                cardDisplay.style.display = "block";
                
                const banReason = isCardBanned(card);
                if (banReason) {
                    resultDiv.textContent = `BANNED: ${banReason}`;
                    resultDiv.className = "banned";
                } else {
                    resultDiv.textContent = "LEGAL in Magic Gauntlet";
                    resultDiv.className = "legal";
                }
            } catch (error) {
                resultDiv.textContent = "Card not found or error occurred";
                resultDiv.className = "";
                cardDisplay.style.display = "none";
                console.error("Error fetching card:", error);
            }
        }

        // INITIALIZE ON LOAD
        window.onload = function() {
            updateBannedList();
            updateGraveyardDisplay();
            
            // Enable Enter key in search
            document.getElementById("searchInput").addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    checkCard();
                }
            });
        };
    </script>
</body>
</html>
