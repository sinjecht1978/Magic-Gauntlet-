<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Gauntlet Card Checker</title>
    <style>
    /* ===== BASE STYLES ===== */
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background: #f5f7fa;
        color: #333;
        line-height: 1.6;
    }
    
    /* ===== HEADER STYLES ===== */
    h1 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 2.5rem;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    p {
        color: #7f8c8d;
        margin-bottom: 30px;
        font-size: 1.1rem;
    }
    
    /* ===== INPUT AREA STYLES ===== */
    #checker-container {
        max-width: 500px;
        margin: 0 auto;
        padding: 30px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    input {
        width: 70%;
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
        transition: border 0.3s;
    }
    
    input:focus {
        border-color: #3498db;
        outline: none;
    }
    
    button {
        background: #3498db;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.3s;
        margin: 5px;
    }
    
    button:hover {
        background: #2980b9;
    }
    
    /* ===== RESULT STYLES ===== */
    #result {
        margin-top: 25px;
        padding: 15px;
        font-size: 1.2rem;
        font-weight: bold;
        border-radius: 6px;
        transition: all 0.3s;
    }
    
    .banned {
        background: #e74c3c;
        color: white;
        box-shadow: 0 3px 6px rgba(231, 76, 60, 0.2);
    }
    
    .legal {
        background: #2ecc71;
        color: white;
        box-shadow: 0 3px 6px rgba(46, 204, 113, 0.2);
    }
    
    /* ===== CARD DISPLAY STYLES ===== */
    #card-display {
        margin-top: 20px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .card-image {
        max-width: 100%;
        height: auto;
        border-radius: 5px;
        margin-top: 10px;
    }
    
    .card-info {
        text-align: left;
        margin-top: 10px;
    }
    
    /* ===== RESPONSIVE ADJUSTMENTS ===== */
    @media (max-width: 600px) {
        #checker-container {
            padding: 20px;
        }
        
        input {
            width: 100%;
            margin-bottom: 10px;
        }
        
        button {
            width: 100%;
        }
    }
    </style>
</head>
<body>
    <h1>Magic Gauntlet Card Checker</h1>
    <p>Check if a Magic: The Gathering card is legal in the Gauntlet format</p>
    
    <div id="checker-container">
        <input type="text" id="searchInput" placeholder="Enter card name">
        <button onclick="checkCard()">Check Card</button>
        <div id="result"></div>
        <div id="card-display" style="display:none;">
            <img id="card-image" class="card-image" src="" alt="Card Image">
            <div id="card-info" class="card-info"></div>
        </div>
    </div>

    <script>
        // Custom rules for Magic Gauntlet format
        function isCardBanned(card) {
            // Damage spell rules
            if (card.type_line.includes("Instant") || card.type_line.includes("Sorcery")) {
                if (card.oracle_text.toLowerCase().includes("damage")) {
                    const damageMatch = card.oracle_text.match(/deal[s]? (\d+) damage/i);
                    if (damageMatch) {
                        const damage = parseInt(damageMatch[1]);
                        const cmc = card.cmc;
                        if (damage > cmc) {
                            return "Damage spells cannot deal more damage than their CMC";
                        }
                    }
                }
                
                // Kill spell rules
                if (card.oracle_text.toLowerCase().includes("destroy target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 5) {
                    return "Unconditional kill spells must cost 5 or more";
                }
                
                // Counter spell rules
                if (card.oracle_text.toLowerCase().includes("counter target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 4) {
                    return "Unconditional counterspells must cost 4 or more";
                }
            }
            
            // Board wipe rules
            if ((card.oracle_text.toLowerCase().includes("destroy all") || 
                card.oracle_text.toLowerCase().includes("exile all")) &&
                card.cmc < 6) {
                return "Mass board wipes must cost 6 or more";
            }
            
            // Land destruction rules
            if (card.oracle_text.toLowerCase().includes("destroy target land") && 
                card.cmc < 4) {
                return "Land destruction spells must cost 4 or more";
            }
            
            // Land rules
            if (card.type_line.includes("Land")) {
                if (card.oracle_text.toLowerCase().includes("enters the battlefield untapped") ||
                    card.oracle_text.toLowerCase().includes("add two or more mana")) {
                    return "Dual lands must enter tapped and cannot have positive ETB effects";
                }
            }
            
            // Mana rock rules
            if (card.type_line.includes("Artifact") && 
                card.oracle_text.toLowerCase().includes("add") && 
                card.oracle_text.toLowerCase().includes("mana")) {
                if (card.cmc < 3 && 
                    !card.oracle_text.toLowerCase().includes("enters the battlefield tapped")) {
                    return "Mana rocks under 3 CMC must enter tapped";
                }
                if (card.oracle_text.toLowerCase().includes("add two or more mana")) {
                    return "Mana rocks can only produce 1 mana";
                }
            }
            
            return false;
        }

        // Check card against format rules
        async function checkCard() {
            const input = document.getElementById("searchInput").value.trim();
            const resultDiv = document.getElementById("result");
            const cardDisplay = document.getElementById("card-display");
            const cardImage = document.getElementById("card-image");
            const cardInfo = document.getElementById("card-info");
            
            if (!input) {
                resultDiv.textContent = "Please enter a card name";
                resultDiv.className = "";
                cardDisplay.style.display = "none";
                return;
            }

            try {
                // Search for card using Scryfall API
                const response = await fetch(`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(input)}`);
                const card = await response.json();
                
                // Display card image and info
                cardImage.src = card.image_uris ? card.image_uris.normal : card.card_faces[0].image_uris.normal;
                cardInfo.innerHTML = `
                    <strong>${card.name}</strong><br>
                    <em>${card.type_line}</em><br>
                    ${card.oracle_text}<br>
                    <strong>Mana Cost:</strong> ${card.mana_cost} (CMC: ${card.cmc})
                `;
                cardDisplay.style.display = "block";
                
                // Check if card is banned
                const banReason = isCardBanned(card);
                if (banReason) {
                    resultDiv.textContent = `BANNED: ${banReason}`;
                    resultDiv.className = "banned";
                } else {
                    resultDiv.textContent = "LEGAL in Magic Gauntlet";
                    resultDiv.className = "legal";
                }
            } catch (error) {
                resultDiv.textContent = "Card not found or error occurred";
                resultDiv.className = "";
                cardDisplay.style.display = "none";
                console.error("Error fetching card:", error);
            }
        }

        // Allow pressing Enter key
        document.getElementById("searchInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                checkCard();
            }
        });
    </script>
</body>
</html>
