<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Gauntlet Card Checker</title>
    <style>
    /* (Your existing CSS styles remain exactly the same) */
    </style>
</head>
<body>
    <h1>Magic Gauntlet Card Checker</h1>
    <p>Check if a Magic: The Gathering card is legal in the Gauntlet format</p>
    
    <div id="checker-container">
        <input type="text" id="searchInput" placeholder="Enter card name">
        <button onclick="checkCard()">Check Card</button>
        <div id="result"></div>
        <div id="card-display" style="display:none;">
            <img id="card-image" class="card-image" src="" alt="Card Image">
            <div id="card-info" class="card-info"></div>
        </div>
    </div>

    <script>
        // HARD BAN LIST - Add cards here that violate the spirit of your format
        const hardBannedCards = [
            { name: "Sol Ring", reason: "Mana rocks producing 2+ mana are banned" },
            { name: "Lightning Bolt", reason: "Damage exceeds CMC (3 damage for 1 mana)" },
            { name: "Mana Crypt", reason: "Free mana rocks are banned" },
            { name: "Mox Emerald", reason: "Free mana rocks are banned" },
            { name: "Mox Jet", reason: "Free mana rocks are banned" },
            { name: "Mox Pearl", reason: "Free mana rocks are banned" },
            { name: "Mox Ruby", reason: "Free mana rocks are banned" },
            { name: "Mox Sapphire", reason: "Free mana rocks are banned" },
            // Add more as needed
        ];

        // Custom rules for Magic Gauntlet format
        function isCardBanned(card) {
            // Check hard ban list first
            const hardBan = hardBannedCards.find(banned => 
                card.name.toLowerCase() === banned.name.toLowerCase()
            );
            if (hardBan) return hardBan.reason;

            // Damage spell rules
            if (card.type_line.includes("Instant") || card.type_line.includes("Sorcery")) {
                if (card.oracle_text.toLowerCase().includes("damage")) {
                    const damageMatch = card.oracle_text.match(/deal[s]? (\d+) damage/i);
                    if (damageMatch) {
                        const damage = parseInt(damageMatch[1]);
                        const cmc = card.cmc;
                        if (damage > cmc) {
                            return "Damage spells cannot deal more damage than their CMC";
                        }
                    }
                }
                
                // Kill spell rules
                if (card.oracle_text.toLowerCase().includes("destroy target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 5) {
                    return "Unconditional kill spells must cost 5 or more";
                }
                
                // Counter spell rules
                if (card.oracle_text.toLowerCase().includes("counter target") && 
                    !card.oracle_text.toLowerCase().includes("unless") &&
                    !card.oracle_text.toLowerCase().includes("if") &&
                    card.cmc < 4) {
                    return "Unconditional counterspells must cost 4 or more";
                }
            }
            
            // Board wipe rules
            if ((card.oracle_text.toLowerCase().includes("destroy all") || 
                card.oracle_text.toLowerCase().includes("exile all")) &&
                card.cmc < 6) {
                return "Mass board wipes must cost 6 or more";
            }
            
            // Land destruction rules
            if (card.oracle_text.toLowerCase().includes("destroy target land") && 
                card.cmc < 4) {
                return "Land destruction spells must cost 4 or more";
            }
            
            // Land rules
            if (card.type_line.includes("Land")) {
                if (card.oracle_text.toLowerCase().includes("enters the battlefield untapped") ||
                    card.oracle_text.toLowerCase().includes("add two or more mana")) {
                    return "Dual lands must enter tapped and cannot have positive ETB effects";
                }
            }
            
            // MANA ROCK RULES - IMPROVED DETECTION
            if (card.type_line.includes("Artifact")) {
                const oracleText = card.oracle_text.toLowerCase();
                
                // Check for mana production
                if (oracleText.includes("add") && oracleText.includes("mana")) {
                    // Check for producing 2+ mana
                    if (oracleText.match(/adds? \{.+\}.+and.+{.+}/) || 
                        oracleText.includes("two or more") ||
                        oracleText.includes("add an additional") ||
                        oracleText.match(/adds? \w+ mana/)) {
                        return "Mana rocks can only produce 1 mana";
                    }
                    
                    // Check for untapped rocks under 3 CMC
                    if (card.cmc < 3 && 
                        !oracleText.includes("enters the battlefield tapped") &&
                        !card.name.toLowerCase().includes("lotus")) { // Exclude Lotus artifacts
                        return "Mana rocks under 3 CMC must enter tapped";
                    }
                }
            }
            
            return false;
        }

        // (Rest of your JavaScript remains exactly the same)
    </script>
</body>
</html>
